<% if user_signed_in?  %>

 <h3>一覧ページ</h3>
 <%= link_to "About", tweets_about_path %>

  <%= link_to "新規投稿へ", new_tweet_path %>
  <% if user_signed_in? %>
   <%= link_to "マイページへ", user_path(current_user.id) %>
  <% end %>

<h3>投稿を検索</h3>
    <%= form_tag({controller:"tweets",action:"index"}, method: :get) do %>
       <%= text_field_tag :search %>
          <% Tag.all.each do |t| %>
           <li><%= check_box :tag_ids, t.name %><%= t.name %></li>
          <% end %>
      <%= submit_tag '検索' %>
    <% end %>


  <%= form_tag({controller:"tweets",action:"index"}, method: :get) do %>
    <%= text_field_tag :tag %>
    <%= submit_tag 'タグを追加' %>
  <% end %>

   <h3>ランキング</h3>


<% @rank_tweets.each do |t| %>
    <div class="tweet">
        <% if t.image.attached? %>
          <%= image_tag t.image, size: '250x200'%>
        <% end %>
          <%= t.kigyoumei %>
         <%= link_to "詳細", tweet_path(t.id) %>
          <% if user_signed_in? %>
           <% if current_user.already_liked?(t) %>
           <%= link_to tweet_like_path(id: t.id, tweet_id: t.id), data: { turbo_method: :delete } do %>
            <p>いいねを取り消す</p><%= t.likes.count %>
          <% end %>

          <% else %>
            <%= link_to tweet_likes_path(id: t.id, tweet_id: t.id), data: { turbo_method: :post }  do %>
           
            <i class="fa-regular fa-thumbs-up"></i>
            <% end %>
          <% end %>

          <% else %>
           <p>いいねの数 = </p><%= t.likes.count %>
           
          <% end %>
       
    </div>
<% end %>




<p id="notice"><%= notice %></p>

<h1>EntryNote</h1>

<table>
  <thead>
    <tr>
      <th>タイトル</th>
      <th>時間</th>
      <th colspan="3"></th>
    </tr>
      </thead>

      <tbody>
  
     </tbody>
     </table>

  <br>

  <%= link_to '新規投稿へ', new_tweet_path %>

  <%= month_calendar events: @tweet do |date, tweet| %>
   <%= date.day %>

    <% tweet.each do |tweet| %>
      <div>
       <%= link_to tweet.kigyoumei, tweet_path(tweet) %>
       </div>
    <% end %>
 <% end %>


<% end %>